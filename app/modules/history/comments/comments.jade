
//- This Source Code Form is subject to the terms of the Mozilla Public
//- License, v. 2.0. If a copy of the MPL was not distributed with this
//- file, You can obtain one at http://mozilla.org/MPL/2.0/.
//-
//- Copyright (c) 2021-present Kaleidos Ventures SL

section.comments
    tg-comment-wysiwyg(
        tg-check-permission="{{::vm.canAddCommentPermission}}"
        type="vm.type"
        ng-if="!vm.reverse"
    )

    .comments-wrapper
        tg-comment.comment(
            ng-repeat="comment in vm.comments track by comment.id"
            ng-class="{'deleted-comment': comment.delete_comment_date}"
            comment="comment"
            name="{{vm.name}}"
            project="vm.project"
            loading="vm.loading"
            editing="vm.editing"
            deleting="vm.deleting"
            object="{{vm.object}}"
            edit-mode="vm.editMode[comment.id]"
            on-edit-mode="vm.onEditMode({commentId: commentId})"
            on-delete-comment="vm.onDeleteComment({commentId: commentId})"
            on-restore-deleted-comment="vm.onRestoreDeletedComment({commentId: commentId})"
            on-edit-comment="vm.onEditComment({commentId: commentId, commentData: commentData, callback: callback})"
        )

    tg-comment-wysiwyg(
        tg-check-permission="{{::vm.canAddCommentPermission}}"
        type="vm.type"
        ng-if="vm.reverse"
    )
